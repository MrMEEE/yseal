#!/bin/bash

set -e

echo "---> Starting ySEal application"

# Create logs directory first (before Django loads settings)
mkdir -p logs

# Run database migrations
echo "---> Running database migrations"
python manage.py migrate --noinput || echo "Migration failed or database not ready"

# Start Gunicorn
echo "---> Starting Gunicorn server"
exec gunicorn yseal.wsgi:application \
    --config gunicorn.conf.py \
    --log-file -
